from pathlib import Path

path = Path("src/mate/ui/shell.py")
text = path.read_text()
old = """"""Main PySide shell."""\nfrom __future__ import annotations\n\nimport sys\n\nfrom PySide6 import QtCore, QtGui, QtWebEngineCore, QtWebEngineWidgets, QtWidgets\n\nfrom mate.config import MateSettings\nfrom mate.core.events import EventBus\nfrom mate.core.state import CaptionFrame, RuntimeState\nfrom mate.ui.widgets import TitleBar\nfrom mate.utils import win32\n\n_NOISY_PATTERNS = (\n    \"sj_evt\",\n    \"Permissions policy violation\",\n    \"Unrecognized feature\",\n    \"Failed to create WebGPU\",\n    \"allow-same-origin for its sandbox\",\n)\n_PREVIOUS_HANDLER = QtWebEngineCore.qInstallMessageHandler(None)\n\n\ndef _qt_console_filter(mode, context, message):  # noqa: ANN001\n    if any(pattern in message for pattern in _NOISY_PATTERNS):\n        return\n    if _PREVIOUS_HANDLER is not None:\n        _PREVIOUS_HANDLER(mode, context, message)\n    else:\n        sys.stderr.write(message + \"\\n\")\n\n\nQtWebEngineCore.qInstallMessageHandler(_qt_console_filter)\n\n\nclass SilentWebView"""\nnew = """"""Main PySide shell."""\nfrom __future__ import annotations\n\nfrom PySide6 import QtCore, QtGui, QtWebEngineWidgets, QtWidgets\n\nfrom mate.config import MateSettings\nfrom mate.core.events import EventBus\nfrom mate.core.state import CaptionFrame, RuntimeState\nfrom mate.ui.widgets import TitleBar\nfrom mate.utils import win32\n\n\nclass SilentWebView"""\nif old not in text:\n    raise SystemExit(\"old block not found\")\ntext = text.replace(old, new, 1)\npath.write_text(text)
